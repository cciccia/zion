#
# dev notes
# 7/15/2013
#

# current commands

fab install --hosts=zion.tinisi.com


# 8/29/2013

all known steps done, troubleshooting

https://zion.tinisi.com:8443

[ ] had mystery ruby service listening on 8443

	[root@zion dhcp]# ps -aux | grep ruby
	Warning: bad syntax, perhaps a bogus '-'? See /usr/share/doc/procps-3.2.8/FAQ
	497       3349  0.0  1.7 122212 33852 ?        S    22:35   0:00 /usr/bin/ruby /usr/share/foreman-proxy/bin/smart-proxy
	root      3915  0.0  0.0 103236   856 pts/0    S+   22:51   0:00 grep ruby
	root     32310  0.0  3.0 156312 58140 ?        Ss   Aug25   0:11 /usr/bin/ruby /usr/bin/puppet agent
	[root@zion dhcp]# kill 3349
	[root@zion dhcp]# ps -aux | grep ruby
	Warning: bad syntax, perhaps a bogus '-'? See /usr/share/doc/procps-3.2.8/FAQ
	root      3929  0.0  0.0 103236   856 pts/0    S+   22:51   0:00 grep ruby
	root     32310  0.0  3.0 156312 58140 ?        Ss   Aug25   0:11 /usr/bin/ruby /usr/bin/puppet agent
	[root@zion dhcp]# service foreman start
	Forem


# 8/23/2013

flailing to get named working
already added the selinux and iptables stuff to the os script

any of these things might have to be added
    # chown root named.conf
    # chmod o=r named.iscdlv.key
    # chown named:named named.conf
    # chown named:named /etc/rndc.key
    # chmod 644 /etc/rndc.key


get ntp working

	ntpdate ntp.pool.org
	hwclock --systohc

rm /var/named/dynamic/managed-keys.bind*
service named restart

just setting the clock to be closer to correct got DNS forwards working with keys
look at adding proper ntp set up to system

# 7/27/2013

to test the current code:

on each host make a folder for some test files in ~
mkdir ~/zion_test

put something like this in your .fabricrc
zion_config_file = /full/path/to/this/src/zion/config/prod.json

workon zion_v_1
	switch to zion_v_1 environment in virtualenv
fab install --hosts=localhost,rancho.tinisi.com
	run the current script in fabfile folder/package
	(this most simple example assumed you have a user with same name as local on all hosts)

on each host this should result in:

cd ~/zion_test
ls -1
bind.install
dhcp.install
foreman.install
install
os.setup
puppet.install
user.create
	
an empty file for each method/action in each package
and the file install should have something like this:

host ip: 192.168.0.12
debug: False 
